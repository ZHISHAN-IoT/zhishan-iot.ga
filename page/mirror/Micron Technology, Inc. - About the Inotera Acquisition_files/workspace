function IsPageBookmarked(n,t){return n==undefined&&(n=$("#hidPageId").val()),t==undefined&&(t=$("#hidPageUrl").val()),n!=undefined||n!=""?$.ajax({url:"/micron/webservices/myworkspace.asmx/GetBookmarkByPage",data:"{'PageID':'"+n+"','URL':'"+t+"'}",type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",error:function(){}}).promise():void 0}function HandleBookmark(n,t,i,r,u){var e=$.parseJSON(n.d),f;if(e.Status=="200")if(e.Result=="true")switch(r){case"Document":alert("You already have this document bookmarked.");break;case"HTML Datasheet":alert("You already have this data sheet bookmarked.");break;case"RoHS Certificate":alert("You already have this RoHS Certificate bookmarked.");break;case"Part":alert("You already have this part bookmarked.");break;case"Page":default:alert("You already have this page bookmarked.")}else i==""&&(i=document.title),$("#hidPageId").val(t),$("#hidPageUrl").val(u),$("#pAddLink").empty(),$("#add_msg").text(""),f=document.createElement("a"),$(f).text(i.replace(",","")).attr("href",u),$("#pAddLink").append(f),get_updated_folders("#radio_folders_new","radio"),$.colorbox({inline:!0,width:"auto",href:"#socialAdd",scrolling:!1,onComplete:function(){$.colorbox.resize()}}),$(".ui-tooltip").length>0&&$(".ui-tooltip").hide()}function get_updated_folders(n,t){$(n).empty();$.ajax({url:"/micron/webservices/myworkspace.asmx/GetFolders",type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",success:function(i){var u=$.parseJSON(i.d),r;if(u.Status=="200"){r=$.parseJSON(u.Result);switch(t){case"select":FillDDL(n,r);break;case"radio":FillRadios(n,r);break;case"template":FillFolderTemplate(r);break;case"both":default:FillDDL(n,r);FillFolderTemplate(r)}}},error:function(){}}).done(function(){$("#ddlFolders").trigger("change")})}function get_bookmarks(n,t,i){n!=""&&$.ajax({url:"/micron/webservices/myworkspace.asmx/GetBookmarks",data:"{'FolderID':'"+n+"'}",type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){var r=$.parseJSON(n.d);r.Status=="200"&&(results=$.parseJSON(r.Result),t=="bookmark"?FillBkTemplate(results):FillBookmarkTemplate(results,t,i))},error:function(){}}).done(function(){$("#my_workspace_container a").each(function(n,t){var i=$(t).attr("href");i!=undefined&&i.indexOf("#")==-1&&i.indexOf("?source")==-1&&(i.indexOf("?")==-1?$(t).attr("href",i+"?source=ws"):$(t).attr("href",i+"&source=ws"))})})}function FillDDL(n,t){$.each(t,function(t,i){$(n).append("<option value='"+i.FolderID+"'>"+i.Title+"<\/option>")})}function FillRadios(n,t){n=="#radio_folders_new"&&($(n).append("<input type='radio' value='' name='folders'>New Folder: <input type=\"text\" id=\"txtNewFolder\" />"),$(n).append("<div class='cleaner'><\/div>"));$.each(t,function(t,i){$(n).append("<input type='radio' value='"+i.FolderID+"' id='"+i.Title+"' name='folders'><label for='"+i.Title+"'>"+i.Title+"<\/label>");$(n).append("<div class='cleaner'><\/div>")})}function FillBkTemplate(n){var r=$("#bkmrk_template_container"),t,u,i,f;r.show();t=r.find("#bkmrk_results_template");t.show();t.empty();u="";i=0;$.each(n,function(n,r){if(i<5){var f=generate_template("#bkmrk_template");f.find("#bkLink").text(r.Title).attr("href",r.Link);f.find("#bkType").text(r.Type);f.find("a.emailBk").attr("href","/email-bookmark?pageid="+r.SitecoreID+"&path="+r.Link);r.Type.indexOf("RoHS")!=-1&&f.find("a.emailBk").attr("href","/email-bookmark?pageid="+r.SitecoreID+"&path="+r.Link+"&rn="+r.Title);u=r.LoggedInState;f.show();$(t).append(f)}i++});f=generate_template("#bkmrk_footer_template");$(t).append(f)}function getBookMarkViewed(){var n=$("#bkLink").attr("href");_gaq.push(["_trackPageview",n])}function CreateFolder(n,t,i){$.ajax({url:"/micron/webservices/myworkspace.asmx/CreateFolder",data:"{'Title':'"+n+"'}",type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){var i,r;data=$.parseJSON(n.d);data.Status=="200"?($(".folder_msg").text("New folder added successfully!"),i="select",$(".btnOptions").length>0&&(i="both"),r=$.parseJSON(data.Result),t!=undefined?SetNewFolderID(r.FolderID):(get_updated_folders("#ddlFolders",i),setTimeout("$.colorbox.close();",1e3))):$(".folder_msg").text(data.Result);$("#pnlNew").hide();$.colorbox.resize()},error:function(){}}).done(function(){var n,r;t!=undefined&&(n=$("input[name=folders]:checked","#radio_folders_new").val(),t.indexOf(",")!=-1?(r=t.split(","),$.each(r,function(t,i){CreateBookmark(i,n,"")})):CreateBookmark(t,n,i))})}function SetNewFolderID(n){$("input[name=folders]:checked","#radio_folders_new").val(n)}function CreateBookmark(n,t,i){n!=""&&t!=""&&$.ajax({url:"/micron/webservices/myworkspace.asmx/CreateBookmark",data:"{'PageID':'"+n+"','FolderID':'"+t+"','URL':'"+i+"'}",type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){data=$.parseJSON(n.d);data.Status=="200"?$("#bkmark_msg").text("New bookmark added successfully!"):$("#bkmark_msg").text(data.Result);$("#pnlSave").hide();$.colorbox.resize();setTimeout("$.colorbox.close();",1e3)},error:function(){}}).done(function(){var n="select";$(".btnOptions").length>0&&(n="both");get_updated_folders("#ddlFolders",n)})}function SaveToWorkspace(n){var t=$.url(n),u=t.param("pageid");u==undefined&&(u=$("#hidPageId").val());var o=t.param("pn"),s=t.param("dn"),h=t.param("rn"),i=t.param("path"),c=t.param("messageid"),e=t.param("topicid"),r="Page",f="";o!=undefined?(r="Part",f=o):s!=undefined?(r="Document",f=decodeURIComponent(s),i!=undefined&&i!=""?(r="HTML Datasheet",e!=undefined&&e!=""&&(i+="#"+e)):i=t.attr("protocol")+"://"+t.attr("host")+t.attr("path")):h!=undefined?(f=h,i!=undefined&&i!=""&&(r="RoHS Certificate")):c!=undefined&&(r="Message");u==undefined&&(u=$(this).attr("rel"));i==undefined&&(i="");r!="Message"?IsPageBookmarked(u,i).done(function(n){HandleBookmark(n,u,f,r,i)}):GetDocsFromMessage(c)}function HandleEmail(n){var t;n==undefined&&(n=$("#hidPageUrl").val());var i=$.url(n),r=i.attr("source").split("?")[0],u=i.param("dn"),f=i.param("page");f!=undefined&&(r="?page="+f);$("#pSocialLinks").empty();$("#social_email_msg").text("");$("#social_email_msg_success").hide();$("#social_email_msg_error").hide();$("#txtSocialEmails").val("");$("#txtSocialNote").val("");t=document.createElement("a");u!=undefined?$(t).text(decodeURIComponent(u).replace(",","")).attr("href",r):$(t).text(document.title.replace(",","")).attr("href",r);$("#pSocialLinks").append(t);$.colorbox({inline:!0,width:"auto",href:"#socialEmail",scrolling:!1,onComplete:function(){$.colorbox.resize()}})}function FillFolderTemplate(n){var t=$(".slider");t.empty();t.show();$.each(n,function(n,i){var r=generate_template("#sliderButton"),u;r.find("span").text(i.Title);r.find("input[type=checkbox]").val(i.FolderID);r.find("input[type=checkbox]").attr("name",i.Title);u=generate_template("#sliderContent");get_bookmarks(i.FolderID,u,i.Title);r.show();$(t).append(r);$(t).append(u)});BindSlider()}function FillBookmarkTemplate(n,t,i){$.each(n,function(n,r){var f=generate_template("#contentTemplate"),u;f.find("label").text(r.Title).attr("for",r.Title).attr("class",r.Icon);f.find("a").text(r.Title.replace(",","")).attr("href",r.Link);u=f.find("input[type=checkbox]");u.val(r.BookmarkID);u.attr("name",r.Title);u.attr("id",r.Title);u.attr("rel",i);$(u).click(function(){DisableButton("bk_chk","#open_rename")});t.append(f)});DisableButton("bk_chk","#open_rename")}function DisableButton(n,t){var i=!1;$("input[type=checkbox]."+n).each(function(){$(this).is(":checked")&&(i=!0,$(t).hasClass("disabled")||$(t).addClass("disabled"))});i||$(t).removeClass("disabled")}function BindSlider(){var n=!1;$(".sliderButton").click(function(){n||($(this).toggleClass("open_accordion"),$(this).next().slideToggle("fast"));n=!1});$(".slider_chk").click(function(){n=!0;DisableButton("slider_chk","#open_move")});DisableButton("slider_chk","#open_move")}function GetCheckedBks(n){(n==undefined||n==null)&&(n=document.body);var t=0,i="";return chkBks=[],$("input[type=checkbox].bk_chk",n).each(function(){$(this).is(":checked")&&(chkBks[t]=$(this).val(),i+=$(this).attr("name")+"\n",t++)}),i}function GetCheckedBkLinks(n){(n==undefined||n==null)&&(n=document.body);var t=0,i=[];return chkBks=[],$("input[type=checkbox].bk_chk",n).each(function(){$(this).is(":checked")&&(chkBks[t]=$(this).val(),i[t]=$(this).parent().find(".hidLink").html(),t++)}),i}function GetCheckedFolders(n,t){(t==undefined||t==null)&&(t=document.body);var i=0,r="";return chkFolders=[],$(".slider .sliderButton input[type=checkbox]",t).each(function(){if($(this).is(":checked")){if(n=="rename")if(i==0)chkFolders[i]=$(this).val(),r=$(this).attr("name");else return alert("You can only rename 1 folder at a time."),$.colorbox.close(),!1;else chkFolders[i]=$(this).val(),r+=$(this).attr("name")+"\n";i++}}),r}function validate(){var n=!0;return $("#txtEmails").val().length==0?($(".error").show(),n=!1):$(".error").hide(),n}var postback,NoPage,folders,chkBks,chkFolders;$(function(){var n=$(".sliderButton");n.on("click",function(n){var t=$(n.target).is("input");t||($(this).next().is(":visible")?($(this).removeClass("open"),$(this).next("div.sliderContent").slideUp("fast")):($(this).addClass("open"),$(this).next("div.sliderContent").slideDown("fast")))})});$(document).ready(function(){$(".emailBk").click(function(){var n=$(this).attr("href"),t;return n.indexOf("#")!=0?(window.location=n,!1):(t=$(this).attr("rel"),HandleEmail(t),!1)});$(".save").click(function(){var n=$(this).attr("href");return n.indexOf("#")!=0?(window.location=n,!1):(SaveToWorkspace($(this).attr("rel")),!1)});$(document).bind("cbox_load",function(){var t=$.colorbox.element().html(),i,r,n;(t==""||t.length>10)&&(t=$.colorbox.element().attr("name"));switch(t){case"New Folder":$("#pnlNew").show();$(".folder_msg").text("");$("#txtFolderName").val("");break;case"Message":i=$.colorbox.element().attr("class");i.indexOf("new")!=-1&&(r=$.colorbox.element().attr("id"),n=$.colorbox.element().attr("href"),n.indexOf("#")==0&&(n=n.substr(1,n.length-1)),MarkMsgRead(r,n))}});$(".cancel").click(function(n){n.preventDefault();$("#cboxClose").trigger("click")});$("#btnSave").click(function(){var n=$("#hidPageId").val(),i=$("#hidPageUrl").val(),t=$("input[name=folders]:checked","#radio_folders_new").val(),r=$("#txtNewFolder").val(),f=$("#lblPage").text(),u;t==""&&r!=""?CreateFolder(r,n,i):t!=""&&(n.indexOf(",")!=-1?(u=n.split(","),$.each(u,function(n,i){CreateBookmark(i,t,"")}),f="multiple"):CreateBookmark(n,t,i))})});chkBks=[];chkFolders=[];$(document).ready(function(){if(folders=="true"&&get_updated_folders("","template"),$("#open_rename").click(function(){if($(this).hasClass("disabled"))return!1}),$("#open_move").click(function(){if($(this).hasClass("disabled"))return!1}),$(document).bind("cbox_load",function(){var e=$.colorbox.element().html(),u,n,t,f,i,r;switch(e){case"Add":$("#pAddLink").empty();$("#add_msg").text("");n=document.createElement("a");$(n).text(document.title.replace(",","")).attr("href",window.location.href);$("#pAddLink").append(n);get_updated_folders("#radio_folders_new","radio");setTimeout("$.colorbox.resize();",200);break;case"Email":u=$.colorbox.element().attr("href");u=="#socialEmail"?($("#pSocialLinks").empty(),$("#social_email_msg").text(""),$("#social_email_msg_success").hide(),$("#social_email_msg_error").hide(),$("#txtSocialEmails").val(""),$("#txtSocialNote").val(""),n=document.createElement("a"),$(n).text(document.title.replace(",","")).attr("href",window.location.href),$("#pSocialLinks").append(n)):u=="#folderEmail"&&($("#pEmails").html(""),$("#email_msg").text(""),$("#txtEmails").val(""),$("#txtNote").val(""),t=GetCheckedBkLinks(),chkBks.length==0&&t.length==0?(alert("You have not selected a bookmark to share."),$.colorbox.close()):$(t).each(function(n){$("#pEmails").append(t[n]);n+1<t.length&&$("#pEmails").append("|")}));break;case"Move To":$("#move_msg").text("");$("#txtBookmarks").val("");i=GetCheckedBks();chkBks.length==0&&i.length==0&&(alert("You have not selected a bookmark to move."),$.colorbox.close());$("#txtBookmarks").val(i);get_updated_folders("#radio_folders","radio");f=$("#moveto").height()+(chkBks.length+1)*36;$("#moveto").css({height:f+"px"});$.colorbox.resize();break;case"Delete":$("#delete_msg").text("");i=GetCheckedBks();r=GetCheckedFolders("delete");chkBks.length==0&&chkFolders.length==0?(alert("You have not selected a folder or bookmark to delete."),$.colorbox.close()):$("#txtDelete").val(i+r);break;case"Rename":$("#rename_msg").text("");$("#txtNewName").val("");r=GetCheckedFolders("rename");r==""||chkFolders.length==0?(alert("You have not selected a folder to rename."),$.colorbox.close()):$("#txtRename").val(r);break;case"New Folder":$(".folder_msg").text("");$("#txtFolderName").val("")}}),$("#btnEmailSubmit").click(function(n){n.preventDefault();var t=$("#pEmails").html(),i=$("#txtEmails").val(),r=$("#txtNote").val(),u=$("#email-copy").is(":checked");if($("#txtEmails").val().length>0)$.ajax({url:"/micron/webservices/myworkspace.asmx/ShareBookmarks",data:"{'Bookmarks':'"+t+"','Emails':'"+i+"','Note':'"+r+"','CCUser':'"+u+"'}",type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){if(data=$.parseJSON(n.d),data.Status=="200")$("#email_msg").text("Bookmark(s) shared successfully!"),$.colorbox.resize(),setTimeout("$.colorbox.close();",1e3);else return $("#email_msg").text(data.Result),$.colorbox.resize(),!1},error:function(){}});else return $("#email_msg").text("Please provide at least one email address."),$.colorbox.resize(),!1}),$("#btnMove").click(function(n){n.preventDefault();var t="",i=GetCheckedBks();$("#radio_folders input[type=radio]").each(function(){$(this).is(":checked")&&(t=$(this).val())});chkBks.length>0&&t!=""&&$(chkBks).each(function(n){$.ajax({url:"/micron/webservices/myworkspace.asmx/MoveBookmark",data:"{'BookmarkID':'"+chkBks[n]+"','FolderID':'"+t+"'}",type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){if(data=$.parseJSON(n.d),data.Status=="200")$("#move_msg").text("Bookmark(s) moved successfully!");else return $("#move_msg").text(data.Result),$.colorbox.resize(),!1;$.colorbox.resize();get_updated_folders("#ddlFolders","both");setTimeout("$.colorbox.close();",1e3)},error:function(){}})})}),$("#btnDelete").click(function(n){n.preventDefault();var t=GetCheckedFolders("delete");chkBks.length>0&&$(chkBks).each(function(n){$.ajax({url:"/micron/webservices/myworkspace.asmx/DeleteBookmark",data:"{'BookmarkID':'"+chkBks[n]+"'}",type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){if(data=$.parseJSON(n.d),data.Status=="200")$("#delete_msg").text("Bookmark(s) deleted successfully!");else return $("#delete_msg").text(data.Result),$.colorbox.resize(),!1;$.colorbox.resize()},error:function(){}})});chkFolders.length>0&&$(chkFolders).each(function(n){$.ajax({url:"/micron/webservices/myworkspace.asmx/DeleteFolder",data:"{'FolderID':'"+chkFolders[n]+"'}",type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){if(data=$.parseJSON(n.d),data.Status=="200")$("#delete_msg").text("Folder(s) deleted successfully!");else return $("#delete_msg").text(data.Result),$.colorbox.resize(),!1;$.colorbox.resize()},error:function(){}})});setTimeout("get_updated_folders('', 'template');",500);setTimeout("$.colorbox.close();",1e3)}),$("#btnRename").click(function(n){n.preventDefault();var t=$("#txtNewName").val();chkFolders.length==1&&t!=""&&$(chkFolders).each(function(n){$.ajax({url:"/micron/webservices/myworkspace.asmx/RenameFolder",data:"{'FolderID':'"+chkFolders[n]+"','Title':'"+t+"'}",type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){if(data=$.parseJSON(n.d),data.Status=="200")$("#rename_msg").text("Folder renamed successfully!");else return $("#rename_msg").text(data.Result),$.colorbox.resize(),!1;$.colorbox.resize();get_updated_folders("","template");setTimeout("$.colorbox.close();",1e3)},error:function(){}})})}),$("#btnFolderSubmit").click(function(n){n.preventDefault();$(".folder_msg").text("");var t=$("#txtFolderName").val();t!=""&&$.ajax({url:"/micron/webservices/myworkspace.asmx/CreateFolder",data:"{'Title':'"+encodeURI(t).replace(/%20/g," ")+"'}",type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){if(data=$.parseJSON(n.d),data.Status=="200")$(".folder_msg").text("New folder added successfully!");else return $(".folder_msg").text(data.Result),$.colorbox.resize(),!1;$("#pnlNew").hide();$.colorbox.resize();get_updated_folders("#ddlFolders","both");setTimeout("$.colorbox.close();",1e3)},error:function(){}})}),postback!=undefined&&postback=="False"&&NoPage=="true"){var n=parent.document.body,t=GetCheckedBks(n),i=GetCheckedFolders("email",n);chkBks.length==0&&chkFolders.length==0?(alert("You have not selected a folder or bookmark to email."),parent.$.colorbox.close()):($("#hdBks").val(chkBks),$("#hdFolders").val(chkFolders),$("#btnFillLinks").trigger("click"))}$("#btnSubmit").click(function(){var n=validate();return n?!0:!1});$("#pnlEmail .cancel").click(function(){parent.$.colorbox.close()})})